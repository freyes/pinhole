<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">

  <title>Pinhole</title>

  <link rel="stylesheet" href="/media/css/bootstrap.min.css">
  <link rel="stylesheet" href="/media/css/font-awesome.css">
  <style>
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
  </style>
  <link rel="stylesheet" href="/media/css/bootstrap-responsive.min.css">

  <script src="/media/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="/media/css/main.css">
</head>
<body>

  <script type="text/x-handlebars">
    <!-- header -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Pinhole</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              {{#linkTo "index" tagName="li" href=false}}<a {{bindAttr href="view.href"}}>Home</i></a>{{/linkTo}}
              {{#linkTo "upload" tagName="li" href=false}}<a {{bindAttr href="view.href"}}><i class="icon-upload icon-large"></i> Upload</a>{{/linkTo}}
              {{#linkTo "about" tagName="li" href=false}}<a {{bindAttr href="view.href"}}>About</i></a>{{/linkTo}}
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#">Action</a></li>
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Nav header</li>
                  <li><a href="#">Separated link</a></li>
                  <li><a href="#">One more separated link</a></li>
                </ul>
              </li>
            </ul>
            {{#if currentUser.isSignedIn }}
               <ul class="nav pull-right">
                 <li>{{currentUser.username}}</li>
               </ul>
            {{else}}
              <form id="frm_login" method="POST" class="navbar-form pull-right">
                <input class="span2" name="username" type="text" placeholder="Username">
                <input class="span2" name="password" type="password" placeholder="Password">
                <button type="submit" class="btn">Sign in</button>
              </form>
            {{/if}}
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
    <!-- end of header -->
    <!-- container -->
    <div class="container">
      {{outlet}}
          <hr>

          <footer>
              <p>&copy; Pinhole 2012</p>
          </footer>

    </div><!-- end of container -->
    </script><!-- template: end index -->

    <script type="text/x-handlebars" data-template-name="index">
    <h1>{{#if currentUser.isSignedIn}}Hi, {{currentUser.username}}{{else}}Hello, Guest{{/if}}</h1>
        <h2>Photos</h2>
    <div class="row">
      {{#each photo in content}}
        <div class="span3">
          {{#linkTo 'photos.view' photo}}
            {{view App.ImgView srcBinding="photo.thumbnail" class="thumbnail img-polaroid"}} 
          {{/linkTo}}
          {{photo.title}}
        </div>
      {{else}}
        <div class="span12">
          <p>Sorry, you don't have photos, you should upload a few to start using pinhole.</p>
        </div>
      {{/each}}
    </div>
    </script>

    <script type="text/x-handlebars" data-template-name="about">
      <div class="row">
        <div class="span12">
          <p>Super fua!
          </p>
        </div>
      </div>
    </script>
    <script type="text/x-handlebars" data-template-name="home">
      foo
    </script>
    <script type="text/x-handlebars" data-template-name="photos">
      <h2>Photos</h2>
      {{outlet}}
    </script>
    <script type="text/x-handlebars" data-template-name="photos/view">
      <h2>{{model.title}}</h2>
      <div class="span12">
        {{view App.ImgView srcBinding="model.large_1024" class="img-polaroid"}}
      </div>
      <p class="span12">{{model.description}}</p>
    </script>
    <script type="text/x-handlebars" data-template-name="upload">
      <div class="row">
        <div class="span12 text-right">
          <a class="btn upload" href="javascript: upload_dialog();">
            <i class="icon-upload"></i> Upload
          </a>
        </div>
      </div>

    <div class="row">
     {{#each controller}}
        <div class="span3 text-center">
          {{view App.ImgView srcBinding="url" class="thumbnail img-polaroid"}}
          <label class="muted">{{filename}}</label>
        </div>
      {{/each}}
    </div>
    </script>

    <script type="text/x-handlebars" data-template-name="logged-out">
      <h1>Logged Out</h1>
      <hr /><br />
      <span>Login with "test/test"</span><br /><br />
      <label>Username: </label>{{view Ember.TextField valueBinding="App.loginController.username"}}<br />
      <label>Password: </label>{{view Ember.TextField valueBinding="App.loginController.password" type="password"}}<br />

      {{#if App.loginController.isError}}
          <span class="login-error">Error: Invalid username or password.</span><br />
      {{/if}}
    
       <br /><button {{action "authenticate" target="App.stateManager"}}>Login</button>
       </script>

<!-- Logged In View -->
<script type="text/x-handlebars" data-template-name="logged-in">
  <h1>Logged In</h1>
  
  <hr /><br />
  <span>Welcome to your app!</span><br /><br />
  <button {{action "logout" target="App.stateManager"}}>Logout</button>
</script>
    <hr>

  <script type="text/javascript" src="js/vendor/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="/media/js/vendor/bootstrap.min.js"></script>
  <script type="text/javascript" src="//api.filepicker.io/v1/filepicker.js"></script>
  <script type="text/javascript" src="js/vendor/handlebars-1.0.0-rc.4.js"></script>
  <script type="text/javascript" src="js/vendor/ember-1.0.0-rc.6.js"></script>
  <script type="text/javascript" src="js/vendor/ember-data.js"></script>
  <script type="text/javascript" src="js/app.js"></script>
  <script type="text/javascript" src="js/router.js"></script>
  <script type="text/javascript" src="js/models.js"></script>
  <script type="text/javascript" src="js/store.js"></script>
  <script type="text/javascript" src="js/views.js"></script>
  <script type="text/javascript" src="js/controller.js"></script>

</body>
</html>
